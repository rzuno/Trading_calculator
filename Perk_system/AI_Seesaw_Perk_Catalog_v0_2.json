{
  "name": "AI Seesaw Perk Catalog",
  "version": "0.2",
  "created_date": "2026-01-27",
  "points_per_gear_R": 10,
  "gear_bounds": {
    "buy_gear_min": 1,
    "buy_gear_max": 5,
    "sell_gear_min": 0,
    "sell_gear_max": 5
  },
  "aggregation": {
    "description": "Final gears are base gears plus (total_points / R).",
    "formula": {
      "sell_gear_final": "clamp(sell_gear_base + sell_points_total / R, sell_gear_min, sell_gear_max)",
      "buy_gear_final": "clamp(buy_gear_base + buy_points_total / R, buy_gear_min, buy_gear_max)"
    },
    "optional_stabilizers": {
      "cap_points_total": {
        "enabled_default": true,
        "sell_points_cap": 20,
        "buy_points_cap": 20
      },
      "hysteresis_days": {
        "enabled_default": false,
        "days": 2,
        "note": "Apply new perk-derived adjustment only if it persists N days."
      },
      "exclusive_group_resolution": {
        "rule_default": "max_abs_score",
        "note": "If multiple perks in an exclusive group trigger, keep the one with the largest |score|. Tie-break by priority then id."
      }
    }
  },
  "data_requirements": {
    "ohlc_required": true,
    "volume_required": true,
    "benchmark_optional": true,
    "user_inputs_optional": [
      "avg_cost",
      "units_held_Q",
      "units_total_N",
      "holding_pct",
      "deployed_pct",
      "last_action_date",
      "earnings_date",
      "fx_pair_ticker"
    ]
  },
  "metric_definitions": {
    "atr_pct_10": "ATR(10)/Close * 100",
    "atr_pct_5": "ATR(5)/Close * 100",
    "rv_pct_10": "std(log returns, 10) * sqrt(10) * 100",
    "roc_pct_3": "(Close/Close[-3] - 1) * 100",
    "roc_pct_5": "(Close/Close[-5] - 1) * 100",
    "roc_pct_10": "(Close/Close[-10] - 1) * 100",
    "slope_pct_10": "(SMA(5) - SMA(10))/Close * 100",
    "rsi_7": "RSI(7)",
    "bb_width_10": "(BB_upper(10,2) - BB_lower(10,2)) / BB_mid(10) * 100",
    "drawdown_from_high_10": "(Close / max(High last 10) - 1) * 100  (<=0)",
    "sign_changes_10": "count of sign changes in daily returns over last 10 sessions",
    "gap_abs_pct_1": "abs(Open/Close[-1] - 1) * 100",
    "volume_pct_rank_20": "percentile rank of today's Volume within last 20 sessions (0..1)",
    "idle_days": "trading sessions since last_action_date (requires calendar-aware counting)",
    "pnl_pct": "(Close/avg_cost - 1) * 100  (requires avg_cost)",
    "deployed_pct": "units_held_Q / units_total_N * 100 (requires Q,N) OR user-provided",
    "holding_pct": "portfolio weight % for this stock (user-provided)",
    "benchmark_roc_pct_10": "ROC(10) computed on benchmark series",
    "benchmark_rv_pct_10": "RV(10) computed on benchmark series",
    "fx_roc_pct_10": "ROC(10) on fx pair (e.g., KRW=X)"
  },
  "exclusive_groups": [
    {
      "id": "market_regime",
      "label": "Market Regime (global)",
      "mode": "winner_takes_one"
    },
    {
      "id": "volatility_profile",
      "label": "Volatility Profile (local)",
      "mode": "winner_takes_one"
    },
    {
      "id": "trend_shape",
      "label": "Trend Shape (local)",
      "mode": "winner_takes_one"
    },
    {
      "id": "idle_flag",
      "label": "Idle Flag (local)",
      "mode": "winner_takes_one"
    }
  ],
  "perks": [
    {
      "id": "G01",
      "name": "Capital Party",
      "style": "fallout",
      "category": "global_market",
      "points": {
        "sell": 10,
        "buy": -10
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "market_regime",
      "priority": 90,
      "requires": [
        "benchmark_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "benchmark_roc_pct_10",
            "op": ">=",
            "value": 4.0
          },
          {
            "metric": "benchmark_rv_pct_10",
            "op": "<=",
            "value": 3.5
          }
        ],
        "score": "benchmark_roc_pct_10",
        "fallback": null
      },
      "notes": "Bull regime: bigger targets, accept shallower dips."
    },
    {
      "id": "G02",
      "name": "Nuclear Winter",
      "style": "fallout",
      "category": "global_market",
      "points": {
        "sell": -10,
        "buy": 10
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "market_regime",
      "priority": 90,
      "requires": [
        "benchmark_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "benchmark_roc_pct_10",
            "op": "<=",
            "value": -4.0
          },
          {
            "metric": "benchmark_rv_pct_10",
            "op": ">=",
            "value": 3.0
          }
        ],
        "score": "-benchmark_roc_pct_10",
        "fallback": null
      },
      "notes": "Bear regime: reduce targets, demand deeper dips."
    },
    {
      "id": "G03",
      "name": "Risk-Off Sirens",
      "style": "fallout",
      "category": "global_market",
      "points": {
        "sell": -15,
        "buy": 15
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "market_regime",
      "priority": 100,
      "requires": [
        "benchmark_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "or",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "benchmark_roc_pct_5",
            "op": "<=",
            "value": -4.0
          },
          {
            "metric": "benchmark_rv_pct_10",
            "op": ">=",
            "value": 6.0
          }
        ],
        "score": "benchmark_rv_pct_10",
        "fallback": null
      },
      "notes": "Panic/shock: survival mode (high priority)."
    },
    {
      "id": "G04",
      "name": "FOMO Carnival",
      "style": "fallout",
      "category": "global_market",
      "points": {
        "sell": 12,
        "buy": -8
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "market_regime",
      "priority": 85,
      "requires": [
        "benchmark_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "benchmark_roc_pct_10",
            "op": ">=",
            "value": 8.0
          },
          {
            "metric": "benchmark_rv_pct_10",
            "op": "<=",
            "value": 4.5
          }
        ],
        "score": "benchmark_roc_pct_10",
        "fallback": null
      },
      "notes": "Euphoria/melt-up: aim bigger, don't wait for deep dips."
    },
    {
      "id": "G05",
      "name": "Sideways Wasteland",
      "style": "fallout",
      "category": "global_market",
      "points": {
        "sell": -5,
        "buy": -5
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "market_regime",
      "priority": 70,
      "requires": [
        "benchmark_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "benchmark_roc_pct_10",
            "op": ">=",
            "value": -2.0
          },
          {
            "metric": "benchmark_roc_pct_10",
            "op": "<=",
            "value": 2.0
          },
          {
            "metric": "benchmark_rv_pct_10",
            "op": "<=",
            "value": 4.0
          }
        ],
        "score": "-(abs(benchmark_roc_pct_10))",
        "fallback": null
      },
      "notes": "Chop/no direction: smaller targets and shallower dip entries."
    },
    {
      "id": "V01",
      "name": "Crazy Dancer",
      "style": "fallout",
      "category": "local_volatility",
      "points": {
        "sell": 5,
        "buy": 5
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "volatility_profile",
      "priority": 60,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "atr_pct_10",
            "op": ">=",
            "value": 3.5
          },
          {
            "metric": "atr_pct_10",
            "op": "<",
            "value": 5.0
          }
        ],
        "score": "atr_pct_10",
        "fallback": null
      },
      "notes": "High volatility."
    },
    {
      "id": "V02",
      "name": "Hard Shaker",
      "style": "fallout",
      "category": "local_volatility",
      "points": {
        "sell": 6,
        "buy": 6
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "volatility_profile",
      "priority": 70,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "atr_pct_10",
            "op": ">=",
            "value": 5.0
          },
          {
            "metric": "bb_width_10",
            "op": ">=",
            "value": 7.0
          }
        ],
        "score": "atr_pct_10",
        "fallback": null
      },
      "notes": "Very volatile & wide bands."
    },
    {
      "id": "V03",
      "name": "Gentle Breeze",
      "style": "fallout",
      "category": "local_volatility",
      "points": {
        "sell": -6,
        "buy": -6
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "volatility_profile",
      "priority": 60,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "atr_pct_10",
            "op": ">=",
            "value": 1.8
          },
          {
            "metric": "atr_pct_10",
            "op": "<",
            "value": 2.6
          }
        ],
        "score": "-atr_pct_10",
        "fallback": null
      },
      "notes": "Low volatility."
    },
    {
      "id": "V04",
      "name": "Sleepwalker",
      "style": "fallout",
      "category": "local_volatility",
      "points": {
        "sell": -8,
        "buy": -8
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "volatility_profile",
      "priority": 70,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "atr_pct_10",
            "op": "<",
            "value": 1.8
          },
          {
            "metric": "bb_width_10",
            "op": "<",
            "value": 3.0
          },
          {
            "metric": "roc_pct_10",
            "op": ">=",
            "value": -2.0
          },
          {
            "metric": "roc_pct_10",
            "op": "<=",
            "value": 2.0
          }
        ],
        "score": "-bb_width_10",
        "fallback": null
      },
      "notes": "Flat & low volatility."
    },
    {
      "id": "V05",
      "name": "Whiplash Engine",
      "style": "fallout",
      "category": "local_volatility",
      "points": {
        "sell": 4,
        "buy": 2
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "volatility_profile",
      "priority": 65,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "sign_changes_10",
            "op": ">=",
            "value": 6
          },
          {
            "metric": "bb_width_10",
            "op": ">=",
            "value": 4.0
          },
          {
            "metric": "bb_width_10",
            "op": "<=",
            "value": 9.0
          }
        ],
        "score": "sign_changes_10",
        "fallback": null
      },
      "notes": "Many reversals; buys slightly deeper."
    },
    {
      "id": "V06",
      "name": "Glass Cannon",
      "style": "fallout",
      "category": "local_volatility",
      "points": {
        "sell": 8,
        "buy": 8
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "volatility_profile",
      "priority": 80,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "atr_pct_10",
            "op": ">=",
            "value": 5.0
          },
          {
            "metric": "roc_pct_5",
            "op": ">=",
            "value": 6.0
          }
        ],
        "score": "atr_pct_10",
        "fallback": null
      },
      "notes": "Explosive moves."
    },
    {
      "id": "V07",
      "name": "Smooth Operator",
      "style": "fallout",
      "category": "local_volatility",
      "points": {
        "sell": 4,
        "buy": -2
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "volatility_profile",
      "priority": 55,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "atr_pct_10",
            "op": "<",
            "value": 3.0
          },
          {
            "metric": "roc_pct_10",
            "op": ">=",
            "value": 5.0
          },
          {
            "metric": "sign_changes_10",
            "op": "<=",
            "value": 3
          }
        ],
        "score": "roc_pct_10",
        "fallback": null
      },
      "notes": "Clean trend, low noise."
    },
    {
      "id": "T01",
      "name": "Rocket Fuel",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": 8,
        "buy": -6
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 70,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "roc_pct_10",
            "op": ">=",
            "value": 8.0
          },
          {
            "metric": "slope_pct_10",
            "op": ">=",
            "value": 0.8
          },
          {
            "metric": "rsi_7",
            "op": ">=",
            "value": 55
          }
        ],
        "score": "roc_pct_10",
        "fallback": null
      },
      "notes": "Strong up slope."
    },
    {
      "id": "T02",
      "name": "Moon Ladder",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": 10,
        "buy": -5
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 75,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "roc_pct_10",
            "op": ">=",
            "value": 12.0
          },
          {
            "metric": "roc_pct_3",
            "op": ">=",
            "value": 4.5
          },
          {
            "metric": "drawdown_from_high_10",
            "op": ">=",
            "value": -2.0
          }
        ],
        "score": "roc_pct_3",
        "fallback": null
      },
      "notes": "J-shape / near highs + burst."
    },
    {
      "id": "T03",
      "name": "Staircase Up",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": 6,
        "buy": -3
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 60,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "roc_pct_10",
            "op": ">=",
            "value": 5.0
          },
          {
            "metric": "roc_pct_10",
            "op": "<",
            "value": 12.0
          },
          {
            "metric": "rv_pct_10",
            "op": "<=",
            "value": 5.0
          },
          {
            "metric": "slope_pct_10",
            "op": ">=",
            "value": 0.3
          }
        ],
        "score": "slope_pct_10",
        "fallback": null
      },
      "notes": "Steady up."
    },
    {
      "id": "T04",
      "name": "Gravity Drill",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": -8,
        "buy": 10
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 70,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "roc_pct_10",
            "op": "<=",
            "value": -6.0
          },
          {
            "metric": "slope_pct_10",
            "op": "<=",
            "value": -0.6
          }
        ],
        "score": "-(roc_pct_10)",
        "fallback": null
      },
      "notes": "Downtrend."
    },
    {
      "id": "T05",
      "name": "Knife Rain",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": -12,
        "buy": 15
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 85,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "roc_pct_5",
            "op": "<=",
            "value": -8.0
          },
          {
            "metric": "atr_pct_10",
            "op": ">=",
            "value": 4.0
          },
          {
            "metric": "rsi_7",
            "op": "<=",
            "value": 45
          }
        ],
        "score": "-(roc_pct_5)",
        "fallback": null
      },
      "notes": "Hard down acceleration."
    },
    {
      "id": "T06",
      "name": "Range Prison",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": -6,
        "buy": -4
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 55,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "bb_width_10",
            "op": "<=",
            "value": 4.0
          },
          {
            "metric": "roc_pct_10",
            "op": ">=",
            "value": -2.0
          },
          {
            "metric": "roc_pct_10",
            "op": "<=",
            "value": 2.0
          }
        ],
        "score": "-bb_width_10",
        "fallback": null
      },
      "notes": "Tight sideways range."
    },
    {
      "id": "T07",
      "name": "Mean-Reversion Magnet",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": -2,
        "buy": -8
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 65,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "bb_width_10",
            "op": ">=",
            "value": 4.0
          },
          {
            "metric": "bb_width_10",
            "op": "<=",
            "value": 9.0
          },
          {
            "metric": "abs(roc_pct_10)",
            "op": "<=",
            "value": 3.0
          },
          {
            "metric": "sign_changes_10",
            "op": ">=",
            "value": 5
          }
        ],
        "score": "sign_changes_10",
        "fallback": null
      },
      "notes": "Choppy mean reversion."
    },
    {
      "id": "T08",
      "name": "Breakout Fever",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": 7,
        "buy": -7
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 70,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "drawdown_from_high_10",
            "op": ">=",
            "value": -0.5
          },
          {
            "metric": "roc_pct_5",
            "op": ">=",
            "value": 3.0
          },
          {
            "metric": "rsi_7",
            "op": ">=",
            "value": 55
          }
        ],
        "score": "roc_pct_5",
        "fallback": null
      },
      "notes": "Repeated pushes to highs."
    },
    {
      "id": "T09",
      "name": "Trend Exhaustion",
      "style": "fallout",
      "category": "local_trend",
      "points": {
        "sell": -3,
        "buy": 3
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "trend_shape",
      "priority": 50,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "roc_pct_10",
            "op": ">=",
            "value": 5.0
          },
          {
            "metric": "roc_pct_5",
            "op": "<=",
            "value": 1.0
          },
          {
            "metric": "rsi_7",
            "op": ">=",
            "value": 65
          }
        ],
        "score": "rsi_7",
        "fallback": null
      },
      "notes": "Uptrend slowing."
    },
    {
      "id": "P01",
      "name": "Oversized Bag",
      "style": "fallout",
      "category": "position_risk",
      "points": {
        "sell": -10,
        "buy": 8
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 80,
      "requires": [
        "deployed_pct_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "deployed_pct",
            "op": ">=",
            "value": 40.0
          },
          {
            "metric": "deployed_pct",
            "op": "<",
            "value": 70.0
          }
        ],
        "score": "deployed_pct",
        "fallback": null
      },
      "notes": "Large position."
    },
    {
      "id": "P02",
      "name": "Maxed-Out Emergency",
      "style": "fallout",
      "category": "position_risk",
      "points": {
        "sell": -15,
        "buy": 15
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 95,
      "requires": [
        "deployed_pct_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "deployed_pct",
            "op": ">=",
            "value": 70.0
          }
        ],
        "score": "deployed_pct",
        "fallback": null
      },
      "notes": "Near max deployment."
    },
    {
      "id": "P03",
      "name": "Underweight Hunger",
      "style": "fallout",
      "category": "position_risk",
      "points": {
        "sell": 0,
        "buy": -8
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 40,
      "requires": [
        "holding_pct_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "holding_pct",
            "op": "<",
            "value": 5.0
          }
        ],
        "score": "-(holding_pct)",
        "fallback": null
      },
      "notes": "Small allocation: easier entries."
    },
    {
      "id": "P04",
      "name": "Profit Cushion",
      "style": "fallout",
      "category": "position_risk",
      "points": {
        "sell": 6,
        "buy": -4
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 35,
      "requires": [
        "avg_cost_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "pnl_pct",
            "op": ">=",
            "value": 8.0
          }
        ],
        "score": "pnl_pct",
        "fallback": null
      },
      "notes": "Comfortable profit."
    },
    {
      "id": "P05",
      "name": "Hostage Situation",
      "style": "fallout",
      "category": "position_risk",
      "points": {
        "sell": -12,
        "buy": 12
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 90,
      "requires": [
        "avg_cost_optional",
        "deployed_pct_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "deployed_pct",
            "op": ">=",
            "value": 40.0
          },
          {
            "metric": "pnl_pct",
            "op": "<=",
            "value": -5.0
          }
        ],
        "score": "-(pnl_pct)",
        "fallback": null
      },
      "notes": "Big + underwater."
    },
    {
      "id": "P06",
      "name": "Break-even Anxiety",
      "style": "fallout",
      "category": "position_risk",
      "points": {
        "sell": -6,
        "buy": 0
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 45,
      "requires": [
        "avg_cost_optional",
        "last_action_date_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "abs(pnl_pct)",
            "op": "<=",
            "value": 2.0
          },
          {
            "metric": "idle_days",
            "op": ">=",
            "value": 5
          }
        ],
        "score": "idle_days",
        "fallback": null
      },
      "notes": "Stuck near avg cost."
    },
    {
      "id": "I01",
      "name": "Idle Breaker: Yellow",
      "style": "fallout",
      "category": "timing_idle",
      "points": {
        "sell": -6,
        "buy": 0
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "idle_flag",
      "priority": 60,
      "requires": [
        "last_action_date_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "idle_days",
            "op": ">=",
            "value": 5
          },
          {
            "metric": "idle_days",
            "op": "<",
            "value": 10
          }
        ],
        "score": "idle_days",
        "fallback": null
      },
      "notes": "Idle >=5."
    },
    {
      "id": "I02",
      "name": "Idle Breaker: Red",
      "style": "fallout",
      "category": "timing_idle",
      "points": {
        "sell": -12,
        "buy": 0
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": "idle_flag",
      "priority": 80,
      "requires": [
        "last_action_date_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "idle_days",
            "op": ">=",
            "value": 10
          }
        ],
        "score": "idle_days",
        "fallback": null
      },
      "notes": "Idle >=10."
    },
    {
      "id": "M01",
      "name": "Patience Mode",
      "style": "fallout",
      "category": "manual_workflow",
      "points": {
        "sell": 4,
        "buy": 4
      },
      "automatable": false,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 50,
      "requires": [],
      "trigger": null,
      "notes": "You want fewer trades today."
    },
    {
      "id": "M02",
      "name": "Busy Day Protocol",
      "style": "fallout",
      "category": "manual_workflow",
      "points": {
        "sell": -6,
        "buy": 6
      },
      "automatable": false,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 50,
      "requires": [],
      "trigger": null,
      "notes": "Low attention / reduce risk."
    },
    {
      "id": "M03",
      "name": "News Minefield",
      "style": "fallout",
      "category": "manual_event",
      "points": {
        "sell": -10,
        "buy": 10
      },
      "automatable": false,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 50,
      "requires": [],
      "trigger": null,
      "notes": "Headline risk (manual for now)."
    },
    {
      "id": "M04",
      "name": "Earnings Roulette",
      "style": "fallout",
      "category": "manual_event",
      "points": {
        "sell": -8,
        "buy": 8
      },
      "automatable": false,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 50,
      "requires": [],
      "trigger": null,
      "notes": "Earnings soon (manual now)."
    },
    {
      "id": "E01",
      "name": "Gap Scar",
      "style": "fallout",
      "category": "event_liquidity",
      "points": {
        "sell": -6,
        "buy": 6
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 55,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 1,
        "conditions": [
          {
            "metric": "gap_abs_pct_1",
            "op": ">=",
            "value": 4.0
          }
        ],
        "score": "gap_abs_pct_1",
        "fallback": null
      },
      "notes": "Recent gap: aftershock."
    },
    {
      "id": "E02",
      "name": "Liquidity Swamp",
      "style": "fallout",
      "category": "event_liquidity",
      "points": {
        "sell": -8,
        "buy": 10
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 60,
      "requires": [],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 20,
        "conditions": [
          {
            "metric": "volume_pct_rank_20",
            "op": "<=",
            "value": 0.2
          },
          {
            "metric": "atr_pct_10",
            "op": ">=",
            "value": 3.5
          }
        ],
        "score": "-(volume_pct_rank_20)",
        "fallback": null
      },
      "notes": "Thin volume + high ATR."
    },
    {
      "id": "F01",
      "name": "FX Tailwind",
      "style": "fallout",
      "category": "fx",
      "points": {
        "sell": 6,
        "buy": -6
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 40,
      "requires": [
        "fx_pair_ticker_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "fx_roc_pct_10",
            "op": ">=",
            "value": 1.5
          }
        ],
        "score": "fx_roc_pct_10",
        "fallback": null
      },
      "notes": "FX moves in your favor (interpret by side)."
    },
    {
      "id": "F02",
      "name": "FX Headwind",
      "style": "fallout",
      "category": "fx",
      "points": {
        "sell": -6,
        "buy": 6
      },
      "automatable": true,
      "manual_default_checked": false,
      "exclusive_group": null,
      "priority": 40,
      "requires": [
        "fx_pair_ticker_optional"
      ],
      "trigger": {
        "type": "auto",
        "logic": "and",
        "lookback_days": 10,
        "conditions": [
          {
            "metric": "fx_roc_pct_10",
            "op": "<=",
            "value": -1.5
          }
        ],
        "score": "-(fx_roc_pct_10)",
        "fallback": null
      },
      "notes": "FX moves against you."
    }
  ]
}